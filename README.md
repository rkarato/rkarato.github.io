# Assessment 1.AWS
*************************************************************************************************************************
Please be aware of the fact that we are not only looking at the actual deliverables but also on your road to these designs. We are mostly interested in the person behind the assessment. If the assessment is successful enough, the next step will be a presentation given to some of our team members.
 
The deliverables are:
a time log of your activities and the road to the solutions
per question (1 to 4) a complete answer, including designs and reasoning of chosen components and configurations
if applicable including template files
publish the deliverables to us
Context:
The solution will need to land on AWS
 
******************************************************************
 
A: You have a client which is a webshop. They have a standard Magento setup with MySQL on a single VPS at their current provider and want to bring this to AWS.
The external software (Magento) is managed, developed and maintained by an external party.
 
1. Design an architecture which incorporates the following client needs. The clients know that his whole setup is going to evolve constantly. Include a cloud formation template for programmable infrastructure for your design.
Needs to be scalable and flexible
Needs to have low latency for SEO purposes
Needs to be cost effective
 


AWS provides  

2. After releasing the new architecture, business takes on, and the client decides to add customer reviews.
Do you need to alter your architecture? And if so, how?
 
3. At some point, one of the customer employees is getting very good at creating vlogs, and the client wants to give customers the opportunity to upload videos with their reviews. They want to store the thumbnails and videos for later processing, and they want to show thumbnails of the videos underneath the product pages.
Alter your architecture to process and store these videos.
 
4. At some point, some clients uploaded non-compliant video's and which created a huge marketing issue. The client now wants to screen the uploaded video's before putting them online, but with minimal costs.
Alter your architecture to be able to screen and process these video's.
 
******************************************************************




# Magento on AWS

AWS provides flexible infrastucture for requirements of all sizes. 

As a pioneer in the creation of what is now called Cloud, AWS still drives the Cloud services with an ever growing number of services, that bottomline, serve more and more clients.

A multitude of those clients run e-commerce web sites that are based on Open Source software Magento. The recurrence of customers requiring this platform setup on the cloud, led to the creation of packaged solutions that can be easily implemented.

AWS has developed 2 approaches to create a standardized Magento platform - LightSail and Cloudformation.

LightSail provides entry level infrastructure that is managed and can be requested in different sizes, for a fraction of the price.

As a managed service, the operational maintenance of the system is done by the AWS professionals letting you concentrate on running your business.

The downside is that the solution does not allow cater for the ability to change and the processing power is limited to the size of package requested.

With bigger flexibility and growth potential in mind, Cloudformation templates are the next option for a fast deployment that also enables your web site to change and cater for incresing customer traffic and usage.


## Suggested architecture

The current client infrastructure can be easily moved to AWS. 

Magento consists of a web application backed by a relational database.

The diagram below shows the target architecture in AWS:
![](https://github.com/rkarato/rkarato.github.io/blob/master/img/10.jpg)


All application layers are built to cater for availability and auto scaling capability. 

### Elastic Load Balancer
The publicly exposed interface of the application is the Elastic Load Balancer. The DNS domain will send requests from the client applications to the AWS hosted services. The Load Balancer will distribute the client calls to the different webservers.


### Elastic Compute Cloud Web Servers
The web servers are deployed as an auto-scaling group. According to the incoming web traffic, the number of web servers is adjusted up and down, so that resource consumption and costs are optmized. The application data is stored in databases and kept in faster caches to speed up customer transactions.

### Elasticache
Elasticache interfaces the application and the underlying data. It is comprised for redundant servers that are provisioned according to the system load. The purpose of this layer is to deliver previously accessed data faster to the web application.
Keeping copies of the data available in layer independent of the database infrastructure, relieves pressure generated by many connections to the database, that would be looking for the same piece of data. With the extra resources available, the database can process a higher number of concurrent client requests with faster response times.

### Relational Database Service
The data storage layer is setup with a writer node and one reader node. This clustered environment manages the number of read replicas that supply data to the application, adding or removing nodes according to load. 



## Deployment
Resources are deployed and managed via the Cloudformation template [magento.template](https://github.com/rkarato/rkarato.github.io/blob/master/template/magento.template)



## Design Considerations
The solution presented here is a variation of the classic webserver deployment, with high availability and scalability features. 
The application traffic and generated load is distributed among different nodes on the different layers of the architecture.
To increase application responsiveness, static content distribution using Simple Storage Service (S3) and the Elasticache layer help speed up content delivery and data retrieval results.
Costs are kept to a minimum as the implementation utilises small instances and horizontal scalling. As the web traffic increases, bigger instances can then be configured.
Security is a mandatory requirement. All AWS services have security features that provide identification, access control and encryption.



## Future enhancements
In addition to increasing the number and size of the scaling nodes, other technologies can be incorporated to the architecture.
For a multi region shop, Cloudfront edge locations can be used to serve static content.
![](https://github.com/rkarato/rkarato.github.io/blob/master/img/20.jpg)




## New Application Requirements
The application architecture can evolve over time.
 
Requirement 2 - Allowing product reviews, should not require architectural changes as reviews can easily be stored on the database and changes to accommodate this functionality be done on the application code.

Requirement 3 - Allow videos and thumbnails, can make use of AWS Elastic Transcoder. This service process videos and change its format to the most suitable according to channel or device being used. Videos can be uploaded to an S3 bucket, transcoded to different formats using a pipeline job and stored the resulting files back into a different S3 bucket, accessible by the application.  
![](https://github.com/rkarato/rkarato.github.io/blob/master/img/30.jpg)

Requirement 4 - Allow video screening, can leverage AWS AI capabilities using Amazon Rekognition. Rekognition evaluate videos, identify and tag its content. Rekognition API calls can be triggered from a S3 bucket. When suspicious content is detected, the video is set asside further manual verification. Safe videos can be moved to another bucket where it will be ready for publishing.
![](https://github.com/rkarato/rkarato.github.io/blob/master/img/40.jpg)




# Conclusion
Having Magento run on AWS offers flexibility to adjust the size of the infrastructure, reliability of a distributed, scalability with easy addition of resources, managed services that take care of the maintenance of the servers and most of all, the ability to overhaul the application with the addition of many other specialized AWS services.  



### Timelog
This document was roughly created using a few hours over the past few days

| Day  | Hours |
| ---: | ----: |
|   15 |     3 |
|   16 |     3 |
|   17 |     3 |
|   18 |     3 |


        